/*! Config - v1.0.0 - 2014-03-18
* https://github.com/rbarros/config.js
* Copyright (c) 2014 Ramon Barros; Licensed MIT */
!function(a){"use strict";function b(a){return"object"==typeof a&&!(null!==a&&a===a.window)&&Object.getPrototypeOf(a)===Object.prototype}function c(a,d,e){var f;for(f in d)e&&(b(d[f])||g(d[f]))?(b(d[f])&&!b(a[f])&&(a[f]={}),g(d[f])&&!g(a[f])&&(a[f]=[],c(a[f],d[f],e))):void 0!==d[f]&&(a[f]=d[f])}var d=function(){return this.version="1.0",this.language=[],this.segment=a.location.pathname.split("/"),this.segment.shift(),this.file=this.segment[this.segment.length-1]||"index.html",this.baseurl=a.location.protocol+"//"+a.location.host+"/"+this.segment[0],this.fileconfig="config.json",this.pathApp="../app/",this.client={},this.setajax={},this.settings={},this.xmlhttp={},this.restfulUrl="../src/",this.api={},this.errors={},this.html={},this.init()};d.prototype.init=function(){console.log("Config "+this.version)},d.prototype.fileExists=function(a,b){var c=this,d=!1;if(!a)return this;try{d=this.ajax({method:"GET",url:a,dataType:b,data:""}),this.setajax=this.extend({},c.setajax,d),404===d.status&&(d=!1),200===d.status&&"OK"===d.statusText&&(d=!0)}catch(e){throw"Ajax method not implemented!"}return d},d.prototype.loadJson=function(a,b){try{if(!a)throw"[Config.loadJson] You must enter a file.";if(this.fileExists(a,"json")===!1)throw"[Config.loadJson] File ["+a+"] not found.";"function"==typeof b&&b(this.setajax.responseText)}catch(c){return c}return this.setajax.responseText},d.prototype.loadConfig=function(b){return b&&this.fileconfig?(this.settings=this.loadJson(this.baseurl+"/"+b+"/"+this.fileconfig),"object"==typeof this.settings&&(this.language[0]={},this.language[0].def=this.settings.language||"pt",this.settings.debug===!0?a.localStorage.debug=!0:delete a.localStorage.debug),this.settings):this},d.prototype.browser=function(){var b=a.navigator.appName,c=a.navigator.appVersion,d=parseFloat(c.indexOf("MSIE"))+1,e=parseFloat(c.substring(d+4,d+7));return"Microsoft Internet Explorer"===b&&e>=7?!0:void 0},d.prototype.setCookie=function(b,c,d){var e=new Date,f=d||1;e.setHours(e.getHours()+f);var g=a.escape(c)+"; expires="+e.toUTCString();a.document.cookie=b+"="+g},d.prototype.getCookie=function(b){var c,d,e,f,g=a.document.cookie.split(";");for(c=0;c<g.length;c++)d=g[c].substr(0,g[c].indexOf("=")),e=g[c].substr(g[c].indexOf("=")+1),d=d.replace(/^\s+|\s+$/g,""),d===b&&(f=a.unescape(e));return f};var e=[],f=e.slice,g=Array.isArray||function(a){return a instanceof Array};d.prototype.extend=function(a){var b,d=f.call(arguments,1);return"boolean"==typeof a&&(b=a,a=d.shift()),d.forEach(function(d){c(a,d,b)}),a},d.prototype.css=function(a){var b=document.createElement("link");b.type="text/css",b.rel="stylesheet",b.href=a,this.tagHead(b,"prepend")},d.prototype.js=function(a){var b=document.createElement("script");b.type="text/javascript",b.src=a,b.async=!0,this.tagHead(b)},d.prototype.tagHead=function(b,c){switch(c){case"prepend":var d=a.document.getElementsByTagName("head")[0];d.insertBefore(b,d.firstChild);break;case"append":document.getElementsByTagName("head")[0].appendChild(b);break;default:document.getElementsByTagName("head")[0].appendChild(b)}},d.prototype.loadTranslate=function(){var a=this.language[0].def,b=this.loadJson(this.baseurl+this.pathApp+"language/"+a+"/pagination.json"),c=this.loadJson(this.baseurl+this.pathApp+"language/"+a+"/validation.json");"undefined"!==b&&this.language.push(b),"undefined"!==c&&this.language.push(c)},d.prototype.translate=function(a,b,c){var d,e,f=c||0,g=null;this.language.length<=1&&0===f&&(this.loadTranslate(),this.translate(a,b,1));for(d in this.language)this.language[d].hasOwnProperty(a)&&(g=this.language[d][a],b&&(e=/([:][A-z]+)/g,g=g.replace(e,b)));return g?g:"Tradução não encontrada."},d.prototype.jsonResponse=function(a){var b=[];return b[400]="Unrecognized command",b[401]="Permission denied",b[402]="Missing argument",b[401]="Incorrect password",b[404]="Account not found",b[405]="Email not validated",b[408]="Token expired",b[411]="Insufficient privileges",b[500]="Internal server error",b[a]},d.prototype.ajax=function(a){var b,c,d,e=this;this.setajax=a;try{if(!this.setajax.url)throw"Você deve informar a url.";if("object"!=typeof this.setajax)throw"Você deve passar um objeto.";this.xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.xmlhttp.onreadystatechange=function(){4===e.xmlhttp.readyState&&200===e.xmlhttp.status&&(e.setajax.responseText="json"===e.setajax.dataType?JSON.parse(e.xmlhttp.responseText):e.xmlhttp.responseText)},c=this.setajax.method||"GET",d=this.setajax.url||this.baseurl,b=this.setajax.async||!1,this.xmlhttp.open(c,d,b),this.setajax.data?(this.xmlhttp.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this.xmlhttp.send(JSON.stringify(this.setajax.data))):this.xmlhttp.send(),this.setajax.success&&"function"==typeof this.setajax.success&&this.setajax.success(this.setajax.responseText)}catch(f){this.setajax.error&&"function"==typeof this.setajax.error&&this.setajax.error(f)}return this.xmlhttp},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.Config=d):a.Config=d,"function"==typeof define&&define.amd&&define("config",function(){return d})}(this);