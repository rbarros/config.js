/*! Config - v1.0.0 - 2014-02-18
* https://github.com/rbarros/config.js
* Copyright (c) 2014 Ramon Barros; Licensed MIT */
!function(a){"use strict";var b=function(){return this.version="3.0",this.system={},this.language=[],this.baseurl=a.location.protocol+"//"+a.location.host+a.location.pathname,this.client={},this.setajax={},this.settings={},this.xmlhttp={},this.restfulUrl="../src/",this.api={},this.errors={},this.html={},this.init()};b.prototype.init=function(){console.log("Config "+this.version)},b.prototype.fileExists=function(a,b){var c=!1;try{c=this.ajax({method:"GET",url:a,dataType:b,data:""})}catch(d){throw"Ajax method not implemented!"}return c},b.prototype.loadJson=function(a,b){var c;try{if(!a)throw"[Config.loadJson] Você deve informar um arquivo.";if(c=this.fileExists(a,"json"),c===!1)throw"[Config.loadJson] Arquivo ["+a+"] não encontrado.";"function"==typeof b&&b(c)}catch(d){console.warn(d)}return c},b.prototype.loadConfig=function(a){if(this.settings=this.loadJson(this.baseurl+a+"/config.json"),"object"==typeof this.settings){this.system=this.settings.system.type||"Type system not found!";var b=this.settings.system.language||"pt";this.language[0]={},this.language[0].def=b,this.settings.system.debug===!0?localStorage.debug=!0:delete localStorage.debug}},b.prototype.browser=function(){var b=a.navigator.appName,c=a.navigator.appVersion,d=parseFloat(c.indexOf("MSIE"))+1,e=parseFloat(c.substring(d+4,d+7));return"Microsoft Internet Explorer"===b&&e>=7?!0:void 0},b.prototype.ajax=function(a){var b,c,d,e=this;this.setajax=a;try{if(!this.setajax.url)throw"Você deve informar a url.";if("object"!=typeof this.setajax)throw"Você deve passar um objeto. ";this.xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.xmlhttp.onreadystatechange=function(){4===e.xmlhttp.readyState&&200===e.xmlhttp.status&&(e.setajax.responseText="json"===e.setajax.dataType?JSON.parse(e.xmlhttp.responseText):e.xmlhttp.responseText)},c=this.setajax.method||"GET",d=this.setajax.url||this.baseurl,b=this.setajax.async||!1,this.xmlhttp.open(c,d,b),this.setajax.data?(this.xmlhttp.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this.xmlhttp.send(JSON.stringify(this.setajax.data))):this.xmlhttp.send(),this.setajax.success&&"function"==typeof this.setajax.success&&this.setajax.success(this.setajax.responseText)}catch(f){this.setajax.error&&"function"==typeof this.setajax.error&&this.setajax.error(f)}return this.xmlhttp},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports.Config=b):a.Config=b,"function"==typeof define&&define.amd&&define("config",function(){return b})}(this);