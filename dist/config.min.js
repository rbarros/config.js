/*! Config - v1.0.0 - 2014-02-19
* https://github.com/rbarros/config.js
* Copyright (c) 2014 Ramon Barros; Licensed MIT */
!function(a){"use strict";function b(a){return"object"==typeof a&&!(null!==a&&a===a.window)&&Object.getPrototypeOf(a)===Object.prototype}function c(a,d,e){var f;for(f in d)e&&(b(d[f])||g(d[f]))?(b(d[f])&&!b(a[f])&&(a[f]={}),g(d[f])&&!g(a[f])&&(a[f]=[],c(a[f],d[f],e))):void 0!==d[f]&&(a[f]=d[f])}var d=function(){return this.version="3.0",this.system={},this.language=[],this.baseurl=a.location.protocol+"//"+a.location.host+a.location.pathname,this.client={},this.setajax={},this.settings={},this.xmlhttp={},this.restfulUrl="../src/",this.api={},this.errors={},this.html={},this.init()};d.prototype.init=function(){console.log("Config "+this.version)},d.prototype.fileExists=function(a,b){var c=!1;try{c=this.ajax({method:"GET",url:a,dataType:b,data:""})}catch(d){throw"Ajax method not implemented!"}return c},d.prototype.loadJson=function(a,b){var c;try{if(!a)throw"[Config.loadJson] You must enter a file.";if(c=this.fileExists(a,"json"),c===!1)throw"[Config.loadJson] File ["+a+"] not found.";"function"==typeof b&&b(c)}catch(d){console.warn(d)}return c},d.prototype.loadConfig=function(b){if(this.settings=this.loadJson(this.baseurl+b+"/config.json"),"object"==typeof this.settings){this.system=this.settings.system.type||"Type system not found!";var c=this.settings.system.language||"pt";this.language[0]={},this.language[0].def=c,this.settings.system.debug===!0?a.localStorage.debug=!0:delete a.localStorage.debug}},d.prototype.browser=function(){var b=a.navigator.appName,c=a.navigator.appVersion,d=parseFloat(c.indexOf("MSIE"))+1,e=parseFloat(c.substring(d+4,d+7));return"Microsoft Internet Explorer"===b&&e>=7?!0:void 0},d.setCookie=function(b,c,d){var e=new Date,f=d||1;e.setHours(e.getHours()+f);var g=a.escape(c)+"; expires="+e.toUTCString();a.document.cookie=b+"="+g},d.getCookie=function(b){var c,d,e,f,g=a.document.cookie.split(";");for(c=0;c<g.length;c++)d=g[c].substr(0,g[c].indexOf("=")),e=g[c].substr(g[c].indexOf("=")+1),d=d.replace(/^\s+|\s+$/g,""),d===b&&(f=a.unescape(e));return f};var e=[],f=e.slice,g=Array.isArray||function(a){return a instanceof Array};d.prototype.extend=function(a){var b,d=f.call(arguments,1);return"boolean"==typeof a&&(b=a,a=d.shift()),d.forEach(function(d){c(a,d,b)}),a},d.prototype.ajax=function(a){var b,c,d,e=this;this.setajax=a;try{if(!this.setajax.url)throw"Você deve informar a url.";if("object"!=typeof this.setajax)throw"Você deve passar um objeto. ";this.xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.xmlhttp.onreadystatechange=function(){4===e.xmlhttp.readyState&&200===e.xmlhttp.status&&(e.setajax.responseText="json"===e.setajax.dataType?JSON.parse(e.xmlhttp.responseText):e.xmlhttp.responseText)},c=this.setajax.method||"GET",d=this.setajax.url||this.baseurl,b=this.setajax.async||!1,this.xmlhttp.open(c,d,b),this.setajax.data?(this.xmlhttp.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this.xmlhttp.send(JSON.stringify(this.setajax.data))):this.xmlhttp.send(),this.setajax.success&&"function"==typeof this.setajax.success&&this.setajax.success(this.setajax.responseText)}catch(f){this.setajax.error&&"function"==typeof this.setajax.error&&this.setajax.error(f)}return this.xmlhttp},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.Config=d):a.Config=d,"function"==typeof define&&define.amd&&define("config",function(){return d})}(this);